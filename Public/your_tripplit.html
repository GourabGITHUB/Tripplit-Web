<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Tripplit â€“ Trip Expense Details</title>
    <meta name="description" content="View and manage all expenses on Tripplit. Track payments, split costs, and settle balances with your group in one simple web app.">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
  <style>
    /* Full-screen loader */
#loader {
  position: fixed;
  width: 100%;
  height: 100%;
  background: #F8FAFC;
  z-index: 2147483647;
  display: flex;
  align-items: center;
  justify-content: center;
    will-change: transform, opacity;


}

/* Spinner styling */
#loader::after {
  content: "";
  width: 40px;
  height: 40px;
  border: 5px solid #abede3;
  border-radius: 50%;
  animation: spin 1s linear infinite;

      background-color: #57dbc7 ; 
}

/* Spinner animation */
@keyframes spin {
    0% {
    transform: scale(1);
    opacity: 1;
  }
  100% {
    transform: scale(2);
    opacity: 0;
  }
}

    :root {
      /* New Color Palette */
      --bg-color: #F0F2F5;
      --bg-color: linear-gradient(
    180deg,
    #F8FAFC 0%, /* Very light blue-white at the top */
    #F0F2F5 100% /* Slightly darker cool gray at the bottom */
  );


   /* Light gray-blue background */
      --card-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      --primary-color: #4a90e2; /* Vibrant blue for accents */
      --success-color: #4caf50;
      --danger-color: #e74c3c;
      --text-color: #2c3e50; /* Darker text */
      --light-text-color: #7f8c8d; /* Lighter text */
      --border-color: #bdc3c7;
      --transition-speed: 0.3s;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: var(--bg-color);
      color: var(--light-text-color);
      margin: 0;
      padding: 2rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      box-sizing: border-box;
      transition: background-color var(--transition-speed);
    }

 #trip-name{
  text-transform: capitalize;
 }
 #participant-list{
  text-transform: capitalize;
 }

/* Styling for the anchor tag itself */
.logo-link {
  /* This is the key to making it a round container */
position: relative;
  bottom: 0;
  left: 0;
  width: 100px;
  height: auto;
  /* This is crucial! It hides any part of the image that might stick out of the circle */
  
  /* Optional: adds a nice visual touch */
}

/* Styling for the image inside the anchor tag */
.logo {
  /* Make the image fill the entire space of the parent .logo-link */
  width: 100%;
  height: 100%;
  /* This ensures the image covers the circle without being stretched or distorted */
}

    .trip-info, .participant-section, .expense-section, .balance-section {
      padding: 2rem;
      border-radius: 1.5rem;
      box-shadow: var(--card-shadow);
      width: 100%;
      max-width: 500px;
      margin-top: 1.5rem;
      transition: transform var(--transition-speed), box-shadow var(--transition-speed);
    }
    
    /* Unique colors for each card/section */
    .trip-info {
  background: #F8F8F8; /* Fallback for browsers that don't support gradients */
  background: linear-gradient(
    135deg,
    #FFFFFF 0%, /* A very subtle white highlight at the top-left */
    #F8F8F8 60%,
    #EAEAEA 100% /* A slightly darker gray for depth at the bottom-right */
  );
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Optional: Adds a subtle shadow for a raised effect */
}
.participant-section {
  background: #EAF4F4; /* Fallback */
  background: linear-gradient(
    to bottom right,
    #F7FFFF 0%, /* A bright highlight */
    #EAF4F4 50%,
    #DCEBEB 100% /* A slightly darker mint for depth */
  );
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}
.expense-section {
  background: #FFF7E6; /* Fallback */
  background: linear-gradient(
    to right,
    #FFFFF7 0%, /* A creamy-white highlight */
    #FFF7E6 80%,
    #F3EACF 100% /* A slightly more saturated, darker yellow for depth */
  );
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}
.balance-section {
  background: #E9F0FB; /* Fallback */
  background: linear-gradient(
    to bottom,
    #F9FBFF 0%, /* A very light blue/white highlight at the top */
    #E9F0FB 50%,
    #DDE4F3 100% /* A slightly deeper periwinkle at the bottom */
  );
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}
    .trip-info:hover, .participant-section:hover, .expense-section:hover, .balance-section:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.12);
    }

    .trip-info h1 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 0.75rem;
      color: var(--text-color);
      font-weight: 700;
      letter-spacing: -0.05em;
    }

    .trip-info h1 i {
      color: var(--primary-color);
      font-size: 1.8rem;
    }

    .trip-info p {
      color: var(--light-text-color);
      font-size: 1rem;
      background: rgba(0,0,0,0.05);
      padding: 1rem 1.5rem;
      border-radius: 1rem;
      margin-top: 0.75rem;
      word-break: break-word;
      text-align: center;
      font-weight: 500;
      border: 1px solid var(--border-color);
    }

    .participant-section h2, .expense-section h2, .balance-section h2 {
      font-size: 1.5rem;
      margin: 0;
      text-align: center;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 1.5rem;
      background-color: rgba(0,0,0,0.05);
      border-radius: 1rem;
      cursor: pointer;
      font-weight: 600;
      color: var(--text-color);
      transition: background-color var(--transition-speed);
      border: 1px solid var(--border-color);
    }

    .participant-section h2:hover, .expense-section h2:hover, .balance-section h2:hover {
      background-color: rgba(0,0,0,0.1);
    }

    .participant-form, .expense-form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-top: 1rem;
    }

    .participant-form input, .expense-form input, .expense-form select {
      padding: 1rem;
      border: 2px solid var(--border-color);
      border-radius: 1rem;
      font-size: 1rem;
      transition: border-color var(--transition-speed), box-shadow var(--transition-speed);
      width: 100%;
      box-sizing: border-box;
    }

    .participant-form input:focus, .expense-form input:focus, .expense-form select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.2);
    }

    .participant-form button, .expense-form button {
      background-color: var(--primary-color);
      color: white;
      border: none;
      padding: 1rem 1.5rem;
      border-radius: 1rem;
      cursor: pointer;
      font-weight: 600;
      font-size: 1rem;
      transition: background-color var(--transition-speed), transform var(--transition-speed);
      box-shadow: 0 4px 10px rgba(74, 144, 226, 0.2);
    }

    .participant-form button:hover, .expense-form button:hover {
      background-color: #3b74b8;
      transform: translateY(-2px);
    }

    .participant-list {
      background-color: #F7FFFF;
      border: 2px dashed #b8c0cc;
      padding: 1.5rem;
      border-radius: 1rem;
      min-height: 5rem;
      color: var(--light-text-color);
      margin-top: 1.5rem;
      font-size: 1rem;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .participant-list p {
      margin: 0;
    }
    
    .participant-list ul {
      list-style-type: none;
      padding: 0;
      margin: 0;
      color: var(--text-color);
      width: 100%;
    }

    .participant-list li {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem 0;
      border-bottom: 1px solid var(--border-color);
      animation: fadeIn var(--transition-speed) ease-in-out;
    }
    
    .participant-list li:last-child {
      border-bottom: none;
    }

    .participant-list li span {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      font-weight: 600;
    }

    .participant-list li i.fa-user {
      color: var(--primary-color);
      font-size: 1.2rem;
    }

    .participant-list li i.fa-trash {
      color: var(--danger-color);
      cursor: pointer;
      font-size: 1rem;
      transition: transform var(--transition-speed);
    }

    .participant-list li i.fa-trash:hover {
      transform: scale(1.1);
    }

    .expense-disabled-message {
      font-size: 1rem;
      color: var(--light-text-color);
      background-color: rgba(0,0,0,0.05);
      padding: 1.5rem;
      border-radius: 1rem;
      text-align: center;
      margin-top: 1.5rem;
    }

    #expense-list {
      margin-top: 1.5rem;
      background-color: #F7FFFF;
      padding: 1.5rem;
      border-radius: 1rem;
      border: 1px solid var(--border-color);
      box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
    }

    #expense-list h3 {
      margin-top: 0;
      font-size: 1.25rem;
      color: var(--text-color);
      font-weight: 700;
    }

    .expense-item {
      padding: 1rem 0;
      border-bottom: 1px solid var(--border-color);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 1rem;
    }
    
    .expense-item:last-child {
      border-bottom: none;
    }

    .expense-item .expense-details {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
    }

    .expense-item .expense-summary {
      font-weight: 700;
      color: var(--text-color);
    }

    .expense-item .expense-meta {
      font-size: 0.9rem;
      color: var(--light-text-color);
      margin-top: 0.2rem;
    }

    .expense-item .expense-actions i {
      font-size: 1rem;
      margin-left: 0.5rem;
      cursor: pointer;
      transition: transform var(--transition-speed);
    }

    .expense-item .expense-actions i:hover {
      transform: scale(1.1);
    }

    .expense-item i.fa-edit {
      color: var(--primary-color);
    }

    .expense-item i.fa-trash {
      color: var(--danger-color);
    }

    /* Dropdown Toggle Section */
    .participant-section h2 i.fa-users,
    .expense-section h2 i.fa-money-bill-wave,
    .balance-section h2 i.fa-receipt {
      color: var(--primary-color);
    }
    
    .toggle-icon {
      transition: transform 0.3s ease;
      font-size: 1.2rem;
    }

    .toggle-icon.rotate {
      transform: rotate(180deg);
    }

    #participant-content,
    #expense-content,
    #balance-content {
      transition: max-height 0.4s ease-in-out;
      max-height: 1000px;
      overflow: hidden;
      margin-top: 1rem;
    }
    
    [style*="display: none"] {
      max-height: 0 !important;
      padding: 0 !important;
      margin: 0 !important;
    }

    .balance-summary, #settlement-history-container {
      background-color: #F7FFFF;

      border: 2px dashed #b8c0cc;
      padding: 1.5rem;
      border-radius: 1rem;
      color: var(--text-color);
      font-size: 1rem;
      text-align: left;
      margin-bottom: 1rem;
      text-transform: capitalize;
    }

    .balance-item {
      display: flex;
      justify-content: space-between;
      padding: 0.75rem 0;
      border-bottom: 1px solid var(--border-color);
      font-weight: 600;
    }

    .balance-item:last-child {
      border-bottom: none;
    }

    .settle-btn {
      background-color: var(--success-color);
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      margin-left: 0.5rem;
      cursor: pointer;
      font-size: 0.85rem;
      font-weight: 600;
      transition: background-color 0.2s ease, transform 0.2s ease;
    }

    .settle-btn:hover {
      background-color: #43a047;
      transform: translateY(-1px);
    }

    .clear-all-container {
      margin-top: 2rem;
      padding-top: 1.5rem;
      border-top: 1px solid var(--border-color);
      display: flex;
      justify-content: center;
      align-items: center;
    }

    #clear-all-btn {
      font-size: 1rem;
      font-weight: 600;
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 1rem;
      cursor: pointer;
      transition: all 0.2s ease;
      background-color: var(--danger-color);
      color: #ffffff;
      box-shadow: 0 4px 10px rgba(231, 76, 60, 0.3);
    }

    #clear-all-btn:hover {
      background-color: #d64032;
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(231, 76, 60, 0.4);
    }

    #clear-all-btn:active {
      background-color: #c0392b;
      transform: translateY(0);
      box-shadow: none;
    }
    
    /* Styling for the custom dialog */
    #custom-dialog-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(26, 26, 46, 0.8);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      transition: opacity 0.3s ease-in-out;
    }

    #custom-dialog-overlay.hidden {
      opacity: 0;
      pointer-events: none;
    }

    #custom-dialog {
      background-color: #ffffff;
      padding: 2.5rem;
      border-radius: 1.5rem;
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
      max-width: 450px;
      width: 90%;
      text-align: center;
      animation: fadeIn 0.3s ease-in-out;
    }

    #dialog-message {
      font-size: 1.2rem;
      margin-bottom: 2rem;
      line-height: 1.6;
      color: var(--text-color);
    }

    #dialog-buttons {
      display: flex;
      justify-content: center;
      gap: 1rem;
    }

    #dialog-buttons button {
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 1rem;
      font-size: 1rem;
      cursor: pointer;
      transition: background-color 0.2s ease, box-shadow 0.2s ease;
      font-weight: 600;
    }

    #dialog-buttons button.secondary {
      background-color: #ecf0f1;
      color: var(--text-color);
    }
    #dialog-buttons button.secondary:hover {
      background-color: #bdc3c7;
    }

    #dialog-buttons button.primary {
      background-color: var(--danger-color);
      color: #ffffff;
    }
    #dialog-buttons button.primary:hover {
      background-color: #d64032;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @media (max-width: 600px) {
      body {
        padding: 1rem;
      }
      .logo {
    height: 2rem; /* Reduce the height on smaller screens */
}
      .loader-image {
    /* Reduce the size of the image on smaller screens */
    height: 80px;
  }

  }

      .trip-info, .participant-section, .expense-section, .balance-section {
        padding: 1.5rem;
        margin-top: 1rem;
      }

      .trip-info h1 {
        font-size: 2rem;
        gap: 0.5rem;
      }
      
      .trip-info h1 i {
        font-size: 1.5rem;
      }

      .trip-info p {
        padding: 0.75rem 1rem;
        font-size: 0.9rem;
      }
      
      .participant-section h2, .expense-section h2, .balance-section h2 {
        font-size: 1.2rem;
      }
      
      .participant-form button, .expense-form button {
        padding: 0.75rem 1rem;
      }
      
      .participant-list, #expense-list {
        padding: 1rem;
      }
      
      .expense-item .expense-summary {
        font-size: 0.95rem;
      }
      
      #clear-all-btn {
        padding: 0.6rem 1rem;
      }
    }

  </style>
</head>
<body>
<div class="logo-link">

<a href="/">
      <img src="Images/logonobg.png" alt="Trip Expense Tracker Logo" class="logo">
    </a>
    </div>
  <div class="trip-info">
    <h1><i class="fas fa-route"></i> <span id="trip-name">Trip</span></h1>
    <p id="trip-id"></p>
  </div>

  <!-- Participants Section -->
<div class="participant-section">
  <h2 onclick="toggleSection('participant-content')" style="cursor: pointer;">
    <i class="fas fa-users"></i> Participants
    <i class="fas fa-chevron-down toggle-icon" id="participant-toggle-icon" style="float: right;"></i>

  </h2>
  <div id="participant-content">
    <div class="participant-list" id="participant-list">
      <p>No participants yet. Add some!</p>
    </div>
    <form id="participant-form" class="participant-form">
      <input type="text" id="participant-name" placeholder="Enter name" required />
      <button type="submit">Add</button>
    </form>
  </div>
</div>

<!-- Expenses Section -->
<div class="expense-section">
  <h2 onclick="toggleSection('expense-content')" style="cursor: pointer;">
    <i class="fas fa-money-bill-wave"></i> Expenses
    <i class="fas fa-chevron-down toggle-icon" id="expense-toggle-icon" style="float: right;"></i>

  </h2>
  <div id="expense-content">
    <form id="expense-form" class="expense-form" style="display: none">
      <input type="text" id="expense-category" placeholder="Expense category" required />
      <input type="number" id="expense-amount" placeholder="Amount" step="0.01" required />
      <select id="expense-paid-by"></select>
      <button type="submit">Add Expense</button>
    </form>
    <div id="expense-list" style="display: none">
      <h3>Expense Items</h3>
      <div id="expense-items"></div>
    </div>
    <div class="clear-all-container">
    <button id="clear-all-btn" class="danger-btn">Clear All Expenses & Settlements</button>
</div>
  </div>
</div>

<!-- Balance summary-->
<div class="balance-section">
  <h2 onclick="toggleSection('balance-content')">
    <i class="fas fa-receipt"></i> Balance Summary
    <i id="balance-toggle-icon" class="fas fa-chevron-down toggle-icon rotate"></i>
  </h2>
  <div id="balance-content" style="display: none;">
    <div id="balance-summary" class="balance-summary">
      <p>Balances will be calculated and shown here.</p>
    </div>
  <div id="settlement-history-container" class="section-container">
    <h3>Settlement History</h3>
    <div id="settlement-history-list">
        </div>
</div>
  </div>

</div>

<script>
  function sleep(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}
window.addEventListener("load", async function () {
  const loader = document.getElementById("loader");
  const content = document.getElementById("content");
await sleep(2000);
  loader.style.display = "none";    // hide loader
});

function toggleSection(id) {
  const content = document.getElementById(id);
  const iconMap = {
    'participant-content': 'participant-toggle-icon',
    'expense-content': 'expense-toggle-icon',
    'balance-content': 'balance-toggle-icon'
  };
  const icon = document.getElementById(iconMap[id]);
  const isHidden = content.style.display === 'none';
  content.style.display = isHidden ? 'block' : 'none';
  icon.classList.toggle('rotate', !isHidden);

}
</script>

  <script type="module" src="./your_tripplit.js"></script>

  <div id="custom-dialog-overlay" class="hidden">
    <div id="custom-dialog">
        <p id="dialog-message"></p>
        <div id="dialog-buttons">
            </div>
    </div>
</div>
    <div id="loader"><img src="Images/logonobg.png" alt="Trip Expense Tracker Logo" class="loader-image"></div>

</body>
</html>
